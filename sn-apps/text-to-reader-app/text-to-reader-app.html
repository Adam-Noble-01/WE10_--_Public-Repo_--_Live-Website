<!DOCTYPE html> <!-- MUST BE THE VERY FIRST LINE -->
<html lang="en">
<head>
    <!-- 
    ====================================================================================================================
    APPLICATION  |  Text To Reader Utility
    FILE NAME    |  RE20_10_01--_Web-App_-_Text-Utility_-_Reader-Tool.html
    FILE TYPE    |  HTML/CSS/JS Single-File Web Application
    APP DETAILS  |  A utility to parse WhatsApp chat text or render Markdown text into a readable format.
    AUTHOR       |  Adam Noble - Studio NoodlFjord
    VERSION      |  1.2.1
    ====================================================================================================================

    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    SCRIPT DESCRIPTION

    This HTML file contains the complete code for the Text To Reader Utility.
    It integrates HTML, CSS, and JavaScript into a single file to provide functionalities including:
    - Text input area for pasting raw text (intended for WhatsApp chat exports or Markdown).
    - A parsing function (`parseWhatsAppMessages`) specifically designed to remove WhatsApp timestamp/sender prefixes (`[dd/mm, HH:MM] Sender Name: `).
    - If the text doesn't match the WhatsApp pattern, it's treated as standard Markdown.
    - Utilizes the third-party Marked.js library (via CDN) to render the cleaned or original text as HTML.
    - An output area displaying the rendered HTML.
    - Action buttons for rendering the text and clearing the input/output fields.
    - Adherence to the "RE10_20_01-_SCHEMA_-_Core-Web-Dev-Code-Conventions.txt" standard.
    - Dynamic injection of the application version (from meta tag) into the header title using the `injectVersionNote` helper function.

    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    ISSUES & LESSONS LEARNED  

    - WhatsApp Pattern Specificity: The `parseWhatsAppMessages` function relies on a specific regex pattern `\[\d{1,2}\/\d{1,2},\s*\d{1,2}:\d{2}\]\s*[^:]+:\s*`. Changes in WhatsApp export format could break this parser. It assumes `[dd/mm, HH:MM] Name:` structure.
    - Marked.js Dependency: Relies on the external Marked.js library hosted on a CDN. If the CDN is unavailable or the library changes its API, rendering will fail.
    - Basic Parsing: The WhatsApp parsing is basic; it only removes the prefix. It doesn't handle other WhatsApp-specific formatting (like italics `_text_` or bold `*text*` differently than standard Markdown). Marked.js handles standard Markdown formatting after the prefix removal.
    - No Error Handling for Marked.js: If `marked.parse()` throws an error, it's not currently caught.

    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    PARSING LOGIC ARCHITECTURE

    1. Input Acquisition: User pastes text into `#inputText`.
    2. Render Trigger: User clicks `#renderButton`.
    3. WhatsApp Check: `handleRenderClick` calls `parseWhatsAppMessages` with the input text.
    4. Pattern Matching: `parseWhatsAppMessages` uses a regex (`testPattern`) to check if the input *looks like* a WhatsApp chat log (checks for at least one instance of the timestamp/sender prefix).
    5. Conditional Processing:
        - If Match: A second regex (`replacePattern`) globally removes all occurrences of the prefix, replacing them with double newlines (`\n\n`) to create paragraph breaks. Extra consecutive newlines are collapsed. The cleaned text is returned.
        - If No Match: The original input text is returned unmodified.
    6. Markdown Rendering: The text returned from `parseWhatsAppMessages` (either cleaned or original) is passed to `marked.parse()`.
    7. Output Display: The HTML string generated by `marked.parse()` is injected into the `#output` div's `innerHTML`.

    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    VISUAL JAVASCRIPT FUNCTION FLOW (Simplified)

    DOMContentLoaded -> initApp()
        ├── Cache DOM Elements (G_DOM_ELEMENTS)
        ├── injectVersionNote() -> Updates #app-title
        └── Attach Event Listeners
            ├── #renderButton -> handleRenderClick()
            │   └── parseWhatsAppMessages(inputText) -> cleanedText
            │   └── marked.parse(cleanedText) -> renderedHtml
            │   └── Update #output.innerHTML
            └── #clearButton -> handleClearClick()
                └── Clear #inputText, #output

    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    FUTURE SCRIPT IMPROVEMENTS & IDEAS

    - More Robust WhatsApp Parsing: Handle variations in date/time format or potential name complexities.
    - Optional Formatting: Allow users to choose whether to keep/strip Markdown/WhatsApp formatting characters (*, _, ~).
    - Error Handling: Add `try...catch` around `marked.parse()` and provide user feedback on errors.
    - Syntax Highlighting: Potentially add syntax highlighting to the input textarea for Markdown.
    - Local Storage: Option to save/load input text.
    - Theme Options: Basic light/dark theme switcher.

    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    SCRIPT DEVELOPMENT & VERSION HISTORY TRACKER

    ??-???-???? - v1.0.0  |  Initial conceptual version (details assumed).
                        - Basic HTML structure.
                        - CSS styling.
                        - Core WhatsApp parsing logic.
                        - Marked.js integration.
                        - Render and Clear functionality.

    03-Apr-2025 - v1.2.1  |  CODE CONVENTION REFACTOR & VERSION INJECTION (Date is illustrative)
                        - Applied "RE10_20_01-_SCHEMA_-_Core-Web-Dev-Code-Conventions.txt".
                        - Added Master File Header comment block with full details.
                        - Added detailed region/sub-region comment blocks (HTML, CSS, JS).
                        - Added Application Version Meta Tag (`1.2.1`).
                        - Implemented dynamic version note injection into header title:
                            - Added `injectVersionNote` helper function.
                            - Added `G_DOM_ELEMENTS` for caching.
                            - Added `initApp` function for initialization.
                            - Added `DOMContentLoaded` listener.
                        - Refactored event listeners into named handler functions (`handleRenderClick`, `handleClearClick`).
                        - Updated version history tracking.
                        - Added Accessibility improvements (label for input, ARIA for output).

    ??-???-???? - vX.Y.Z  |  LIST FUTURE UPDATES HERE

    ====================================================================================================================
    -->

    <!-- 
    =============================================================================================
    HTML | HEAD SECTION: META, TITLE, FONTS, CSS
    - Introduced in v1.0.0 | Updated v1.2.1 (Added Version Meta)
    Contains metadata (including application version), page title, font links, 
    and all CSS styles for the application.
    =============================================================================================
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add Application Version Meta Tag -->
    <meta name="application-version" content="1.2.1"> <!-- ← CONFIG | Set Application Version Here -->
    <title>Text To Reader Utility</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap" rel="stylesheet"> <!-- ← KEY LINK | Google Fonts Dependency -->
    
    <!--  - - - - - - - - - - - - - - - - - -  FAVICON CONFIGURATION  - - - - - - - - - - - - - - - - - - -->
    <!-- Primary SVG Favicon (Best for modern browsers) -->
    <link rel="icon" type="image/svg+xml" href="/assets/AD05_-_LIBR_-_Common_-_Icons-and-favicons/AD05_01_-_NA_Favicon_-_SVG-h50mm.svg">
    <!-- PNG Fallbacks for various resolutions -->
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/AD05_-_LIBR_-_Common_-_Icons-and-favicons/AD05_04_-_NA_Favicon_-_PNG-h512px.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/AD05_-_LIBR_-_Common_-_Icons-and-favicons/AD05_05_-_NA_Favicon_-_PNG-h192px.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/AD05_-_LIBR_-_Common_-_Icons-and-favicons/AD05_06_-_NA_Favicon_-_PNG-h32px.png">
    <!-- ICO Fallback for legacy browsers -->
    <link rel="icon" type="image/x-icon" href="/assets/AD05_-_LIBR_-_Common_-_Icons-and-favicons/AD05_07_-_NA_Favicon_-_ICO-h32px.ico">
    <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    
    <style>
        /* =============================================================================================
           CSS | BASIC RESET & LAYOUT
           - Introduced in v1.0.0 | Refactored v1.2.1
           ============================================================================================= */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100%; 
            background: #f0f0f0;
            font-family: 'Open Sans', sans-serif;
            font-size: 14px; 
            color: #333;
            line-height: 1.5;
        }
        #app-container {
            width: 100%;
            min-height: 100vh; 
            overflow-y: auto; 
        }

        /* =============================================================================================
           CSS | HEADER STYLING
           - Introduced in v1.0.0 | Updated v1.2.1
           ============================================================================================= */
        #header {
            width: 100%;
            height: 55px; 
            background: #fff;
            border-bottom: 2px solid #4a4a4a; 
            display: flex;
            align-items: center;
            padding: 0 20px; 
            box-sizing: border-box;
            position: sticky; 
            top: 0;
            z-index: 10;
        }
        #app-title {
            font-size: 22px; 
            color: #4a4a4a;
            font-weight: 600;
            display: flex; 
            align-items: baseline; 
            gap: 8px; 
        }
        #app-title .version-note {
             /* Styles applied via JS */
        }

        /* =============================================================================================
           CSS | MAIN CONTENT AREA
           - Introduced in v1.0.0 | Refactored v1.2.1
           ============================================================================================= */
        #main {
            width: 90%; 
            max-width: 800px; 
            margin: 30px auto; 
            padding: 25px;
            background-color: #ffffff; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }

        /* =============================================================================================
           CSS | TEXTAREA INPUT STYLING & LABEL
           - Introduced in v1.0.0 | Refactored v1.2.1 | Added Label Style v1.2.2 (implicitly)
           ============================================================================================= */
         /* Style for the input label */
         label[for="inputText"] {
             display: block; 
             margin-bottom: 8px; 
             font-weight: 600;
             font-size: 14px;
             color: #333;
             text-align: left; 
         }
        
        #inputText {
            width: 100%;
            height: 250px; 
            padding: 12px;
            font-size: 14px; 
            color: #282828;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            resize: vertical;
            font-family: monospace; 
            line-height: 1.6;
            margin-bottom: 20px; 
        }

        /* =============================================================================================
           CSS | BUTTON CONTAINER & BUTTONS
           - Introduced in v1.0.0 | Refactored v1.2.1
           ============================================================================================= */
        .button-container {
            display: flex;
            justify-content: flex-end; 
            gap: 10px; 
            margin-top: 10px; 
        }
        #renderButton, #clearButton {
            padding: 10px 20px; 
            font-size: 14px; 
            border: none;
            color: #fff;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        #renderButton {
            background-color: #0078D7; 
        }
        #renderButton:hover {
            background-color: #005a9e;
        }
        #clearButton {
            background-color: #dc3545; 
        }
        #clearButton:hover {
            background-color: #c82333;
        }

        /* =============================================================================================
           CSS | OUTPUT AREA STYLING
           - Introduced in v1.0.0 | Refactored v1.2.1
           ============================================================================================= */
        #output-heading { 
            margin-top: 30px; 
            margin-bottom: 10px; 
            font-size: 18px; 
            color: #333;
            text-align: left;
            border-bottom: 1px solid #eee; 
            padding-bottom: 5px;
        }
           
        #output {
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px;
            background-color: #f9f9f9; 
            min-height: 250px; 
            text-align: left; 
            line-height: 1.6; 
            font-size: 14px; 
            white-space: pre-wrap; 
            word-wrap: break-word; 
            overflow-y: auto; 
        }
        /* Styling for elements generated by Marked.js */
        #output p { margin: 0 0 1em 0; }
        #output strong, #output b { font-weight: 600; }
        #output em, #output i { font-style: italic; }
        #output pre { background-color: #eee; padding: 10px; border-radius: 4px; overflow-x: auto; }
        #output code { font-family: monospace; background-color: #eee; padding: 0.2em 0.4em; border-radius: 3px; }
        #output pre code { padding: 0; background-color: transparent; }
        #output blockquote { border-left: 4px solid #ccc; padding-left: 10px; margin-left: 0; color: #666; }
        #output ul, #output ol { padding-left: 25px; }
        #output li { margin-bottom: 0.5em; }
    </style>
</head>
<body>
    <!-- 
    =============================================================================================
    HTML | APP CONTAINER & HEADER
    - Introduced in v1.0.0 | Updated v1.2.1 
    =============================================================================================
    -->
    <div id="app-container">
        <div id="header">
            <span id="app-title">Text To Reader Utility</span> 
        </div>

        <!-- 
        =============================================================================================
        HTML | MAIN CONTENT: Input, Buttons, Output
        - Introduced in v1.0.0 | Refactored v1.2.1 | Accessibility v1.2.2 (implicitly)
        =============================================================================================
        -->
        <div id="main">

            <!-- -----------------------------------------------------------------------------------------
               HTML | INPUT AREA
               - Introduced in v1.0.0 | Accessibility v1.2.2 (Added Label)
               ----------------------------------------------------------------------------------------- -->
            <label for="inputText">Input Text (WhatsApp or Markdown):</label> 
            <textarea
                id="inputText"
                placeholder="Paste your text (WhatsApp or Markdown) here..."
            ></textarea>

            <!-- -----------------------------------------------------------------------------------------
               HTML | ACTION BUTTONS
               - Introduced in v1.0.0
               ----------------------------------------------------------------------------------------- -->
            <div class="button-container">
                <button id="renderButton">Render Text To Page</button>
                <button id="clearButton">Clear Text</button>
            </div>

            <!-- -----------------------------------------------------------------------------------------
               HTML | OUTPUT AREA
               - Introduced in v1.0.0 | Accessibility v1.2.2 (Added ARIA attributes & heading ID)
               ----------------------------------------------------------------------------------------- -->
            <h2 id="output-heading">Output</h2> 
            <div 
                id="output" 
                role="region" 
                aria-live="polite" 
                aria-labelledby="output-heading"
            >
                <!-- Rendered content will appear here -->
            </div>

        </div> <!-- End #main -->
    </div> <!-- End #app-container -->

    <!-- 
    =============================================================================================
    JAVASCRIPT | THIRD-PARTY LIBRARIES
    - Introduced in v1.0.0
    =============================================================================================
    -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- ← KEY LINK | Marked.js Dependency -->

    <!-- 
    =============================================================================================
    JAVASCRIPT | CORE APPLICATION SCRIPT
    - Introduced in v1.0.0 | Refactored v1.2.1
    =============================================================================================
    -->
    <script>
        // =============================================================================================
        // JAVASCRIPT | GLOBAL VARIABLES & CONSTANTS
        // - Introduced in v1.2.1
        // Defines global constants and caches frequently accessed DOM elements.
        // =============================================================================================
        const G_DOM_ELEMENTS = {
            appTitle: null,
            inputText: null,
            renderButton: null,
            clearButton: null,
            output: null,
            // No need to cache outputHeading unless manipulated by JS
        };

        // =============================================================================================
        // JAVASCRIPT | HELPER FUNCTIONS
        // - Sections introduced as needed, refined in v1.2.1
        // Contains utility functions used by other parts of the script.
        // =============================================================================================

        // ------------------------------------------------------------
        // HELPER FUNCTION | PARSE WHATSAPP MESSAGES
        // - Introduced in v1.0.0 | Refactored v1.2.1
        // DESCRIPTION
        // - Attempts to detect and clean WhatsApp chat log prefixes.
        // - If the text matches the WhatsApp pattern, it removes the timestamp/sender
        //   prefixes (`[dd/mm, HH:MM] Sender Name: `) and replaces them with paragraph breaks.
        // - If no match, returns the original text for standard Markdown processing.
        // ARGUMENTS
        // - rawText (String): The input text from the textarea.
        // RETURNS
        // - (String): The cleaned text (if WhatsApp) or the original text.
        // IMPORTANT NOTES
        // - Relies on a specific regex pattern for detection and replacement.
        // ------------------------------------------------------------
        function parseWhatsAppMessages(rawText) {
            // Regex to test if the text *contains* the WhatsApp prefix pattern.
            // Need to escape square brackets: \[ and \]
            const testPattern = /\[\d{1,2}\/\d{1,2},\s*\d{1,2}:\d{2}\]\s*[^:]+:\s*/;

            // Check if the pattern exists anywhere in the text.
            if (!testPattern.test(rawText)) {
                // Not WhatsApp format (or at least doesn't start with the pattern), return as-is for Markdown.
                console.log("Input doesn't match WhatsApp pattern, treating as Markdown.");
                return rawText;
            }
            
            console.log("WhatsApp pattern detected, attempting to clean prefixes.");
            // Regex to *globally replace* the WhatsApp prefix pattern.
            const replacePattern = /\[\d{1,2}\/\d{1,2},\s*\d{1,2}:\d{2}\]\s*[^:]+:\s*/g;
            
            // Replace all occurrences of the prefix with double newlines for paragraph breaks.
            let replaced = rawText.replace(replacePattern, "\n\n");
            
            // Collapse multiple (3+) consecutive newlines into just two to prevent excessive spacing.
            replaced = replaced.replace(/\n{3,}/g, "\n\n");
            
            // Trim leading/trailing whitespace that might result from replacements.
            return replaced.trim();
        }
        
        // ------------------------------------------------------------
        // HELPER FUNCTION | INJECT VERSION NOTE
        // - Introduced in v1.2.1 (Adapted from Regex Tool example)
        // DESCRIPTION
        // - Dynamically reads the application version from the meta tag and adds a styled
        //   version note into the application title element (#app-title).
        // ARGUMENTS
        // - options (Object, optional): Configuration options (see defaults inline).
        // IMPORTANT NOTES
        // - Assumes meta tag `name="application-version"` and element `#app-title` exist.
        // ------------------------------------------------------------
        function injectVersionNote(options = {}) {
             // --- Configuration with Defaults ---
            const config = {
                metaTagName: options.metaTagName || 'application-version',
                targetElementId: options.targetElementId || 'app-title',
                prefix: options.prefix !== undefined ? options.prefix : ' - Version ', // Adjusted prefix
                suffix: options.suffix !== undefined ? options.suffix : '', // No suffix by default
                style: options.style || {
                    fontSize: '12px',
                    color: '#656565',
                    fontWeight: 'normal' // Ensure normal weight
                }
            };

            // --- Find Target Element ---
            const targetElement = G_DOM_ELEMENTS.appTitle; // Use cached element
             if (!targetElement) {
                console.error(`Error: Target element #${config.targetElementId} not found for injecting version note.`);
                return;
            }

            // --- Get Version from Meta Tag ---
            const metaTag = document.querySelector(`meta[name="${config.metaTagName}"]`);
            if (!metaTag) {
                console.warn(`Warning: Meta tag with name="${config.metaTagName}" not found. Cannot inject version note.`);
                return;
            }
            const versionString = metaTag.getAttribute('content');
            if (!versionString) {
                 console.warn(`Warning: Meta tag "${config.metaTagName}" found, but has no content attribute. Cannot inject version note.`);
                return;
            }
            console.log(`Injecting version: ${versionString}`);

            // --- Get Base Title ---
            let baseTitle = '';
            for (let i = 0; i < targetElement.childNodes.length; i++) {
                if (targetElement.childNodes[i].nodeType === Node.TEXT_NODE) {
                    baseTitle = targetElement.childNodes[i].textContent.trim();
                    break;
                }
            }
             if (!baseTitle) { // Fallback
                 baseTitle = targetElement.textContent.split(config.prefix.trim())[0].trim() || 'App';
                 console.warn(`#${config.targetElementId} base text determined via fallback. Current text: "${targetElement.textContent}"`);
             }

            // --- Create the Version Note Span ---
            const versionSpan = document.createElement('span');
            versionSpan.className = 'version-note';
            versionSpan.textContent = `${config.prefix}${versionString}${config.suffix}`;

            // --- Apply Styling ---
            for (const property in config.style) {
                if (config.style.hasOwnProperty(property)) {
                    versionSpan.style[property] = config.style[property];
                }
            }

            // --- Inject into DOM ---
            targetElement.innerHTML = ''; // Clear existing content
            targetElement.appendChild(document.createTextNode(baseTitle)); // Add base title text node
            targetElement.appendChild(versionSpan); // Append the new version span
        }

        // =============================================================================================
        // JAVASCRIPT | EVENT HANDLERS
        // - Introduced in v1.0.0 | Refactored into named functions in v1.2.1
        // Contains functions that handle specific user interactions (button clicks).
        // =============================================================================================

        // ------------------------------------------------------------
        // EVENT HANDLER | RENDER BUTTON CLICK
        // - Introduced in v1.0.0 | Refactored v1.2.1
        // DESCRIPTION
        // - Gets input text, attempts WhatsApp parsing, renders using Marked.js,
        //   and displays the result in the output area.
        // ------------------------------------------------------------
        function handleRenderClick() {
            if (!G_DOM_ELEMENTS.inputText || !G_DOM_ELEMENTS.output) {
                 console.error("Render handler: Input or output element missing.");
                 return;
            }
            if (typeof marked === 'undefined') {
                 console.error("Render handler: Marked.js library is not loaded.");
                 G_DOM_ELEMENTS.output.innerHTML = '<p style="color: red;">Error: Marked.js library failed to load. Cannot render text.</p>';
                 return;
            }

            // 1) Get raw input
            const rawInput = G_DOM_ELEMENTS.inputText.value;

            // 2) Attempt to parse as WhatsApp text (or get original back)
            const cleanedText = parseWhatsAppMessages(rawInput);

            try {
                // 3) Convert cleaned/original text to HTML via Marked.js
                // Configure marked to sanitize potentially harmful HTML
                const renderedHtml = marked.parse(cleanedText, { sanitize: true }); // Added basic sanitization

                // 4) Display result
                G_DOM_ELEMENTS.output.innerHTML = renderedHtml;
            } catch (error) {
                 console.error("Error during Marked.js parsing:", error);
                 G_DOM_ELEMENTS.output.innerHTML = `<p style="color: red;">Error rendering Markdown: ${error.message}</p>`;
            }
        }

        // ------------------------------------------------------------
        // EVENT HANDLER | CLEAR BUTTON CLICK
        // - Introduced in v1.0.0 | Refactored v1.2.1
        // DESCRIPTION
        // - Clears the content of the input textarea and the output display area.
        // ------------------------------------------------------------
        function handleClearClick() {
             if (G_DOM_ELEMENTS.inputText) {
                G_DOM_ELEMENTS.inputText.value = '';
             } else {
                 console.warn("Clear handler: Input element missing.");
             }
             if (G_DOM_ELEMENTS.output) {
                G_DOM_ELEMENTS.output.innerHTML = '';
             } else {
                 console.warn("Clear handler: Output element missing.");
             }
        }

        // =============================================================================================
        // INITIALIZATION | MAIN APPLICATION INIT
        // - Introduced in v1.2.1
        // DESCRIPTION
        // - Sets up the application on page load: caches DOM elements, injects version note,
        //   and attaches global event listeners.
        // =============================================================================================
        function initApp() {
            console.log(`Initializing Text To Reader Utility v1.2.1...`); 

            // --- Cache DOM Elements ---
            G_DOM_ELEMENTS.appTitle = document.getElementById('app-title');
            G_DOM_ELEMENTS.inputText = document.getElementById('inputText');
            G_DOM_ELEMENTS.renderButton = document.getElementById('renderButton');
            G_DOM_ELEMENTS.clearButton = document.getElementById('clearButton');
            G_DOM_ELEMENTS.output = document.getElementById('output');

            // --- Check if all essential elements were found ---
            let essentialElementsFound = true;
             for (const key in G_DOM_ELEMENTS) {
                if (G_DOM_ELEMENTS[key] === null) {
                     console.error(`Initialization Error: DOM element for '${key}' not found.`);
                     essentialElementsFound = false;
                }
             }

             if (!essentialElementsFound) {
                 // Display a critical error message if essential elements are missing
                 document.body.innerHTML = '<p style="color: red; font-weight: bold; padding: 20px;">Error: Application could not initialize. Essential HTML elements are missing. Check the console for details.</p>';
                 return; // Stop initialization
             }
             
             // --- Inject Version Note ---
             injectVersionNote(); // Use default settings

            // --- Attach Global Event Listeners ---
            G_DOM_ELEMENTS.renderButton.addEventListener('click', handleRenderClick);
            G_DOM_ELEMENTS.clearButton.addEventListener('click', handleClearClick);

             console.log("Text To Reader Utility Initialized Successfully.");
        }

        // =============================================================================================
        // LISTENER | DOM CONTENT LOADED
        // - Introduced in v1.2.1
        // DESCRIPTION
        // - Ensures the DOM is fully parsed before running the main initialization script.
        // =============================================================================================
        document.addEventListener('DOMContentLoaded', initApp);

    </script>

</body>
</html>